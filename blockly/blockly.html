<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="blockly_compressed.js"></script>
    <script type="text/javascript" src="blocks_compressed.js"></script>
    <script type="text/javascript" src="en.js"></script>
    <script type="text/javascript" src="ru.js"></script>
    <script type="text/javascript" src="de.js"></script>
    <script type="text/javascript" src="cz.js"></script>
    <script type="text/javascript" src="javascript_compressed.js"></script>
    <script type="text/javascript" src="blockly_espruino.js"></script>
    <script type="text/javascript" src="blockly_menu.js"></script>
    <script type="text/javascript" src="blockly_gfx.js"></script>
    <script type="text/javascript" src="blockly_robot.js"></script>
    <script type="text/javascript" src="blockly_amperka_motorshield.js"></script>
    <script type="text/javascript" src="blockly_ble.js"></script>
    <script type="text/javascript" src="blockly_nordic_thingy.js"></script>
    <script type="text/javascript" src="blockly_smartibot.js"></script>
    <script type="text/javascript" src="blockly_bangle.js"></script>
    <script type="text/javascript" src="field_textarea.js"></script>
    <script type="text/javascript" src="../js/libs/imageconverter.js"></script>
    <style>
      html, body {
        background-color: #fff;
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
      .blocklySvg {
        height: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>

  <!-- Blockly toolbox -->
  <xml id="toolbox" style="display: none">
    <category name="Logic" colour="%{BKY_LOGIC_HUE}">
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
      <block type="logic_operation"></block>
      <block type="logic_negate"></block>
      <block type="logic_boolean"></block>
      <block type="logic_ternary"></block>
    </category>
    <category name="Control" colour="%{BKY_LOOPS_HUE}">
      <block type="espruino_delay">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_timeout">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_interval">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="controls_repeat_ext">
        <value name="TIMES">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
      </block>
      <block type="controls_whileUntil"></block>
      <block type="controls_for">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">10</title>
          </block>
        </value>
        <value name="BY">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="controls_forEach"></block>
      <block type="controls_flow_statements"></block>
    </category>
    <category name="Math" colour="%{BKY_MATH_HUE}">
      <block type="math_number">
        <title name="NUM">0</title>
      </block>
      <block type="math_arithmetic">
        <title name="OP">ADD</title>
      </block>
      <block type="math_single">
        <title name="OP">ROOT</title>
      </block>
      <block type="math_trig">
        <title name="OP">SIN</title>
      </block>
      <block type="math_constant">
        <title name="CONSTANT">PI</title>
      </block>
      <block type="math_number_property">
        <mutation divisor_input="false"></mutation>
        <title name="PROPERTY">EVEN</title>
      </block>
      <block type="math_change">
        <title name="VAR">item</title>
        <value name="DELTA">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
      </block>
      <block type="math_round">
        <title name="OP">ROUND</title>
      </block>
      <block type="math_on_list">
        <title name="OP">SUM</title>
      </block>
      <block type="math_modulo"></block>
      <block type="math_constrain" >
        <value name="LOW">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="HIGH">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_int">
        <value name="FROM">
          <block type="math_number">
            <title name="NUM">1</title>
          </block>
        </value>
        <value name="TO">
          <block type="math_number">
            <title name="NUM">100</title>
          </block>
        </value>
      </block>
      <block type="math_random_float"></block>
    </category>
    <category name="Text" colour="%{BKY_TEXTS_HUE}">
      <block type="text"  >
        <title name="TEXT"></title>
      </block>
      <block type="text_join" inline="false"  >
        <mutation items="2"></mutation>
      </block>
      <block type="text_append" inline="false"  >
        <title name="VAR">item</title>
        <value name="TEXT">
          <block type="text">
            <title name="TEXT"></title>
          </block>
        </value>
      </block>
      <block type="text_length" inline="false"  ></block>
      <block type="text_isEmpty" inline="true"  ></block>
      <block type="text_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_charAt" inline="true"  >
        <mutation at="true"></mutation>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_getSubstring" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="STRING">
          <block type="variables_get">
            <title name="VAR">text</title>
          </block>
        </value>
      </block>
      <block type="text_changeCase" inline="false"  >
        <title name="CASE">UPPERCASE</title>
      </block>
      <block type="text_trim" inline="false">
        <title name="MODE">BOTH</title>
      </block>
      <block type="text_print" inline="false">
        <value name="TEXT"><block type="text"><title name="TEXT">Hello</title></block></value>
      </block>
      <block type="json_stringify" inline="true"  ></block>
      <block type="json_parse" inline="true"  ></block>
    </category>
    <category name="Lists" colour="%{BKY_LISTS_HUE}">
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
          <block type="lists_create_empty"  ></block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_create_with" inline="false"  >
          <mutation items="3"></mutation>
        </block>
      </value></block>
      <block type="variables_set"><title name="VAR">list</title><value name="VALUE">
        <block type="lists_repeat" inline="true"  >
          <value name="NUM">
            <block type="math_number">
              <title name="NUM">5</title>
            </block>
          </value>
        </block>
      </value></block>
      <block type="lists_length" inline="false"  ></block>
      <block type="lists_isEmpty" inline="true"  ></block>
      <block type="lists_indexOf" inline="true"  >
        <title name="END">FIRST</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getIndex" inline="true"  >
        <mutation statement="false" at="true"></mutation>
        <title name="MODE">GET</title>
        <title name="WHERE">FROM_START</title>
        <value name="VALUE">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_setIndex" inline="true"  >
        <mutation at="true"></mutation>
        <title name="MODE">SET</title>
        <title name="WHERE">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
      <block type="lists_getSublist" inline="true"  >
        <mutation at1="true" at2="true"></mutation>
        <title name="WHERE1">FROM_START</title>
        <title name="WHERE2">FROM_START</title>
        <value name="LIST">
          <block type="variables_get">
            <title name="VAR">list</title>
          </block>
        </value>
      </block>
    </category>
    <category name="Variables">
      <block type="variables_set" inline="false"  >
        <title name="VAR">item</title>
      </block>
      <block type="variables_get"  >
        <title name="VAR">item</title>
      </block>
    </category>
    <!--<category name="Procedures">
      <block type="procedures_defnoreturn"  >
        <mutation></mutation>
        <title name="NAME">do something</title>
      </block>
      <block type="procedures_defreturn" inline="false"  >
        <mutation></mutation>
        <title name="NAME">do something2</title>
      </block>
      <block type="procedures_ifreturn" inline="true"  >
        <mutation value="1"></mutation>
      </block>
      TODO - need to auto-add calls here??
    </category> -->
    <category name="Espruino" disable_if="smartibot">
      <block type="espruino_timeout">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_clear_timeout">
      </block>
      <block type="espruino_interval">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_clear_interval">
      </block>
      <block type="espruino_change_interval">
        <value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="espruino_getTime"></block>
      <block type="espruino_pin"></block>
      <block type="espruino_PWM_pin"></block>
      <block type="espruino_BTN_pin"></block>
      <block type="espruino_LED_pin"></block>
      <block type="espruino_watch">
        <value name="PIN"><block type="espruino_BTN_pin"><title name="PIN">BTN1</title></block></value>
        <value name="DEBOUNCE"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="espruino_digitalWrite">
        <value name="PIN"><block type="espruino_LED_pin"><title name="PIN">RED1</title></block></value>
      </block>
      <block type="espruino_digitalPulse">
        <value name="PIN"><block type="espruino_LED_pin"><title name="PIN">RED1</title></block></value>
        <value name="VAL"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value>
        <value name="TIME"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="espruino_digitalRead">
        <value name="PIN"><block type="espruino_BTN_pin"><title name="PIN">BTN1</title></block></value>
      </block>
      <block type="espruino_analogWrite">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">A1</title></block></value>
	<value name="VAL"><block type="math_number"><title name="NUM">100</title></block></value>
	<value name="FREQ"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="espruino_analogRead">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">A0</title></block></value>
      </block>
      <block type="espruino_pinMode">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">D0</title></block></value>
      </block>
      <block type="espruino_code">
      </block>
      <block type="espruino_jsexpression">
    </category>
    <category name="Wifi">
      <block type="esp8266_connect">
	<field name="SER">Serial6</field>
        <value name="RX"><block type="espruino_pin"><title name="PIN">C7</title></block></value>
        <value name="TX"><block type="espruino_pin"><title name="PIN">C6</title></block></value>
        <value name="BAUD"><block type="math_number"><title name="NUM">115200</title></block></value>
      </block>
      <block type="connect_ssid">
      </block>
      <block type="createap"></block>
      <block type="getconnecteddevices"></block>
      <block type="get_IP">
      </block>
      <block type="get_APs">
      </block>
      <block type="get_version">
      </block>
      <block type="get_connected">
      </block>
      <block type="create_server">
        <value name="PORT"><block type="math_number"><title name="NUM">8080</title></block></value>
      </block>
      <block type="connect_server">
        <value name="PORT"><block type="math_number"><title name="NUM">8080</title></block></value>
      </block>
      <block type="send_data">
      </block>
      <block type="bind_callbacks">
      </block>
    </category>
    <category name="Web">
      <block type="create_web_server">
        <value name="PORT"><block type="math_number"><title name="NUM">80</title></block></value>
      </block>
      <block type="read_objects_property_" inline="false">
        <mutation items="1"></mutation>
      </block>
      <block type="url_parse"></block>
      <block type="httpsrs_end"></block>
      <block type="httpsrs_writehead">
        <value name="CODE"><block type="math_number"><title name="NUM">200</title></block></value>
      </block>
      <block type="http_get"></block>
    </category>
    <category name="Hardware" disable_if="smartibot">
      <block type="hw_servoMove">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">B13</title></block></value>
        <value name="VAL"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="hw_servoStop">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">B13</title></block></value>
      </block>
      <block type="hw_ultrasonic">
        <value name="TRIG"><block type="espruino_pin"><title name="PIN">B4</title></block></value>
        <value name="ECHO"><block type="espruino_pin"><title name="PIN">B3</title></block></value>
      </block>
    </category>
    <category name="Graphics" disable_if="smartibot">
      <block type="gfx_clear">
      </block>
      <block type="gfx_flip">
      </block>
      <block type="gfx_setFont">
        <value name="SIZE"><block type="math_number"><title name="NUM">2</title></block></value>
      </block>
      <block type="gfx_setColor">
      </block>
      <block type="gfx_setBgColor">
      </block>
      <block type="gfx_drawString">
        <value name="TEXT"><block type="text"><title name="TEXT">Hello</title></block></value>
        <value name="X"><block type="math_number"><title name="NUM">0</title></block></value>
        <value name="Y"><block type="math_number"><title name="NUM">0</title></block></value>
      </block>
      <block type="gfx_moveTo">
        <value name="X"><block type="math_number"><title name="NUM">0</title></block></value>
        <value name="Y"><block type="math_number"><title name="NUM">0</title></block></value>
      </block>
      <block type="gfx_lineTo">
        <value name="X"><block type="math_number"><title name="NUM">100</title></block></value>
        <value name="Y"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="gfx_draw">
        <value name="X"><block type="math_number"><title name="NUM">20</title></block></value>
        <value name="Y"><block type="math_number"><title name="NUM">20</title></block></value>
        <value name="X2"><block type="math_number"><title name="NUM">40</title></block></value>
        <value name="Y2"><block type="math_number"><title name="NUM">40</title></block></value>
      </block>
      <block type="gfx_image">
        <value name="X"><block type="math_number"><title name="NUM">20</title></block></value>
        <value name="Y"><block type="math_number"><title name="NUM">20</title></block></value>
      </block>
    </category>
    <category name="Menus" disable_if="smartibot">
      <block type="menu_message">
        <value name="TEXT"><block type="text"><title name="TEXT">Hello</title></block></value>
      </block>
      <block type="menu_alert">
        <value name="TEXT"><block type="text"><title name="TEXT">Hello</title></block></value>
      </block>
      <block type="menu_prompt">
        <value name="TEXT"><block type="text"><title name="TEXT">Hello</title></block></value>
      </block>
    </category>
    <!-- Bangle.js -->
    <category name="Bangle.js" disable_if="smartibot">
      <block type="bangle_beep"></block>
      <block type="bangle_buzz"></block>
      <block type="bangle_turnon"></block>
      <block type="bangle_turnoff"></block>
      <block type="bangle_on"></block>
      <block type="bangle_result_bool"></block>
      <block type="bangle_result_number"></block>
    </category>
    <category name="Robot" enable_if="robot">
      <block type="robot_motor"></block>
      <block type="robot_led"></block>
      <block type="robot_ldr"></block>
    </category>
    <category name="LCD">
      <block type="lcd_display_init">
        <value name="RS"><block type="espruino_pin"><title name="PIN">A0</title></block></value>
        <value name="RW"><block type="espruino_pin"><title name="PIN">A2</title></block></value>
        <value name="E"><block type="espruino_pin"><title name="PIN">A1</title></block></value>
        <value name="D4"><block type="espruino_pin"><title name="PIN">C0</title></block></value>
        <value name="D5"><block type="espruino_pin"><title name="PIN">C1</title></block></value>
        <value name="D6"><block type="espruino_pin"><title name="PIN">C2</title></block></value>
        <value name="D7"><block type="espruino_pin"><title name="PIN">C3</title></block></value>
      </block>
      <block type="lcd_display_write"><value name="CMD"><block type="math_number"><title name="NUM">0</title></block></value></block>
      <block type="lcd_display_clear"></block>
      <block type="lcd_display_print"></block>
      <block type="lcd_display_set_cursor"></block>
      <block type="lcd_display_create_char"></block>
    </category>
    <!-- Amperka's MotorShield -->
    <category name="Amperka Motor Shield" enable_if="motorshield">
      <block type="amperka_motorshield_motor"></block>
      <block type="amperka_motorshield_motor_dir"></block>
    </category>
    <!-- Nordic Thingy:52 -->
    <category name="Nordic Thingy:52" enable_if="nordic_thingy">
      <block type="thingy_sound_play"><value name="SAMPLERATE"><block type="math_number"><title name="NUM">4000</title></block></value></block>
      <block type="thingy_sound_record"><value name="LEN"><block type="math_number"><title name="NUM">1000</title></block></value></block>
      <block type="thingy_sensor_once"></block>
      <block type="thingy_sensor_many"></block>
      <block type="thingy_result"></block>
    </category>
   <category name="Smartibot" enable_if="smartibot">
      <block type="smartibot_motor">
        <value name="VAL"><block type="math_number"><title name="NUM">0.5</title></block></value>
      </block>
      <block type="smartibot_LED">
        <value name="LR"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="LG"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="LB"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="RR"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="RG"><block type="math_number"><title name="NUM">50</title></block></value>
        <value name="RB"><block type="math_number"><title name="NUM">50</title></block></value>
      </block>
      <block type="smartibot_LEDcol">
        <value name="BRIGHT"><block type="math_number"><title name="NUM">0.9</title></block></value>
      </block>
      <block type="smartibot_servo">
        <value name="VAL"><block type="math_number"><title name="NUM">50</title></block></value>
      </block>
      <block type="espruino_watch">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value>
      </block>
    </category>

    <category name="Bluetooth" enable_if="bluetooth">
      <block type="ble_connected"></block>
      <block type="ble_disconnected"></block>

      <block type="ble_uart_write">
        <value name="VAL"><block type="text"><title name="TEXT">LED.toggle()</title></block></value>
        <value name="DEV"><block type="ble_dev_name"></block></value>
      </block>
      <block type="ble_advertise">
        <value name="VAL"><block type="text"><title name="TEXT">Hello</title></block></value>
      </block>
      <block type="ble_on_advertise"></block>

      <block type="ble_dev_name"></block>
      <block type="ble_dev_prefix"></block>
      <block type="ble_dev_address"></block>

      <block type="ble_characteristic"></block>
      <block type="ble_characteristic_dropdown"></block>

      <block type="ble_setchar">
        <value name="CHAR"><block type="ble_characteristic_dropdown"></block></value>
        <value name="DEV"><block type="ble_dev_name"></block></value>
      </block>
      <block type="ble_getchar">
        <value name="CHAR"><block type="ble_characteristic_dropdown"></block></value>
        <value name="DEV"><block type="ble_dev_name"></block></value>
      </block>
      <block type="ble_write">
        <value name="CHAR"><block type="ble_characteristic_dropdown"></block></value>
        <value name="VAL"><block type="math_number"><title name="NUM">50</title></block></value>
      </block>
      <block type="ble_onwritten">
        <value name="CHAR"><block type="ble_characteristic_dropdown"></block></value>
      </block>
    </category>
    <category name="Modules">
      <block type="switch"></block>
      <block type="watch_switch">
        <value name="DEBOUNCE"><block type="math_number"><title name="NUM">100</title></block></value>
      </block>
      <block type="potenciometer"></block>
      <block type="motor_driver">
        <value name="speed"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="encoder_connect">
        <value name="HOLES"><block type="math_number"><title name="NUM">12</title></block></value>
      </block>
      <block type="encoder_reset"></block>
      <block type="encoder_get"></block>
      <block type="servo_move">
        <value name="PIN"><block type="espruino_pin"><title name="PIN">A1</title></block></value>
        <value name="POS"><block type="math_number"><title name="NUM">1</title></block></value>
      </block>
      <block type="line_sensor_3_diodes_d"></block>	
      <block type="line_sensor_3_diodes_a"></block>	
      <block type="espruino_ebr00043l"></block>	
      <block type="hcsr04_def"></block>
      <block type="HCSR04_read">
        <value name="sensor"><block type="variables_get"><title name="VAR">item</title></block></value>
      </block>
      <block type="YL64_def">
        <value name="S0"><block type="espruino_pin"><title name="PIN">A0</title></block></value>
        <value name="S1"><block type="espruino_pin"><title name="PIN">A1</title></block></value>
        <value name="S2"><block type="espruino_pin"><title name="PIN">A2</title></block></value>
        <value name="S3"><block type="espruino_pin"><title name="PIN">A3</title></block></value>
        <value name="OUT"><block type="espruino_pin"><title name="PIN">A4</title></block></value>
      </block>
      <block type="YL64_read">
        <value name="sensor"><block type="variables_get"><title name="VAR">item</title></block></value>
      </block>
      <block type="spi_setup">
        <value name="MISO"><block type="espruino_pin"><title name="PIN">B4</title></block></value>
        <value name="MOSI"><block type="espruino_pin"><title name="PIN">B5</title></block></value>
        <value name="SCK"><block type="espruino_pin"><title name="PIN">B3</title></block></value>
      </block>
      <block type="rc522_init">
        <value name="CS"><block type="espruino_pin"><title name="PIN">B2</title></block></value>
      </block>
      <block type="rc522_findcards"></block>
      <block type="i2c_setup">
        <field name="PORT">1</field>
        <field name="SPEED">100000</field>
      <next>
      <block type="variables_set">
        <field name="VAR">laser</field>
        <value name="VALUE">
          <block type="vl53l1x_init">
            <field name="PORT">1</field>
            <field name="RANGE">short</field>
            <field name="MEASUREMENT_PERIOD">20</field>
          </block>
        </value>
      </block>
      </next>
      </block>
      
      <block type="vl53l1x_read"></block>
    </category>
    <category name="Functions" custom="PROCEDURE"></category>
  </xml>

    <!-- Blockly initial code -->
<xml id="blocklyInitial" style="display: none">
  <block type="espruino_watch" inline="true"  ><title name="EDGE">rising</title><value name="PIN"><block type="espruino_pin"><title name="PIN">BTN1</title></block></value><statement name="DO"><block type="espruino_digitalWrite" inline="true"><value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value><value name="VAL"><block type="logic_boolean"><title name="BOOL">TRUE</title></block></value><next><block type="espruino_timeout" inline="true"><value name="SECONDS"><block type="math_number"><title name="NUM">1</title></block></value><statement name="DO"><block type="espruino_digitalWrite" inline="true"><value name="PIN"><block type="espruino_pin"><title name="PIN">LED1</title></block></value><value name="VAL"><block type="logic_boolean"><title name="BOOL">FALSE</title></block></value></block></statement></block></next></block></statement></block>
</xml>
<xml id="blocklyInitial_smartibot" style="display: none">

</xml>

  </body>
</html>
